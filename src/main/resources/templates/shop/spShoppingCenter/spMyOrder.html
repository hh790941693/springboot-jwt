<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="utf-8">
<head>
    <th:block th:include="common :: header"></th:block>
    <meta charset="UTF-8">
    <title>我的订单</title>

    <style>
        #mainDiv {
            width: 100%;
            height: 100%;
            padding: 10px 30px 10px 30px;
        }
    </style>
</head>
<body>
    <div id="mainDiv">
        <div style="width:100%;height:350px;overflow-y: auto;border:1px solid grey;">
            <div v-for="orderInfo in orderList" style="width: 100%;height:86px;border-bottom:1px solid grey;margin-bottom: 3px;padding: 3px;">
                <div>
                    <p>父订单号：{{orderInfo.mainOrder.orderNo}}</p>
                    <p>原价：{{orderInfo.mainOrder.totalPrice}}</p>
                    <p>支付价格：{{orderInfo.mainOrder.payPrice}}</p>
                </div>
                <div v-for="subOrder in orderInfo.subOrderList">
                    <div style="width: 100px;height:100px;float:left;">
                        <img :src="subOrder.backImage" width="100%" height="100%">
                    </div>
                    <div style="width: 100px;height:25px;float:left;">
                        {{subOrder.name}}
                    </div>
                    <div style="width: 100px;height:25px;float:left;">
                        {{subOrder.goodsCount}}
                    </div>
                    <div style="width: 100px;height:25px;float:left;">
                        ￥{{toFixedNumber(subOrder.originalPriceStr)}} ￥{{toFixedNumber(subOrder.salePriceStr)}}
                    </div>
                    <div style="width: 100px;height:25px;float:left;">
                        ￥{{toFixedNumber(subOrder.totalOriginalPrice)}} ￥{{toFixedNumber(subOrder.totalSalePrice)}}
                    </div>
                </div>
                <div style="width:15%;height:84px;float:left;padding:10px;">
                    <img :src="goods.backImage" style="width: 100%;height: 100%;">
                </div>
            </div>
        </div>
    </div>
    <th:block th:include="common :: footer"></th:block>
</body>
    <script>
        var app = new Vue({
            el: '#mainDiv',
            data: {
                orderList : [],  //订单数据
            },
            methods: {
                queryMyOrderList : function(){
                    $.ajax({
                        type: "GET",
                        url: "/shop/shoppingCenter/queryMyOrderList",
                        success: function (result) {
                            if (result.code == 1) {
                                app.orderList = result.data;
                            }
                        }
                    });
                },
                toFixedNumber : function (num) {
                    return num.toFixed(2);
                }
            },
            created : function() {
                this.queryMyOrderList();
            }
        });
    </script>
</html>