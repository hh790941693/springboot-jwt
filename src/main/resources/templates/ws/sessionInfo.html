<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
<head th:include="common :: header"></head>
<title>会话信息</title>

<style type="text/css">
    #mainDiv{
        width: 510px;
        height: auto;
        margin: 100px auto;
        border: 2px solid green;
    }

    table{
        width:100%;
        margin-top:2px;
    }

    table th{
        background-color:green;
        font-weight:bold;
        color:white;
        text-align:center;
        height: 28px;
    }

    table tr{
        border:1px solid green;
        height: 23px;
    }

    table td{
        border:1px solid green;
    }
</style>
</head>
    <body>
        <div id="mainDiv">
            <input type="hidden" th:value="${sessionInfo}" id="user">
            <table>
                <tr><th style="width:40%">key</th><th>value</th></tr>
            </table>

            <div align="center" style="margin:10px auto;">
                <button onclick="toIndex()" class='btn btn-sm btn-primary'>返回首页</button>
            </div>

            <div th:include="common::footer"></div>
        </div>
        <script th:inline="javascript">
            var sessionInfo = [[${sessionInfo}]];
            $.each(sessionInfo, function(key,value){
                var trElement = $('<tr><td style="width:40%">'+key+'</td><td>'+value+'</td></tr>');
                $("table").append(trElement);
            });

            function toIndex(){
                $.ajax({
                    type: 'POST',
                    url: rootUrl+'/',
                    data:{user:null},
                    async:false,
                    success: function(result) {
                        window.location.href = rootUrl;
                    }
                });
            }
        </script>
    </body>
</html>
